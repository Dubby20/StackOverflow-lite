<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>View Answers</title>
  <link href="https://fonts.googleapis.com/css?family=Lobster|Lobster+Two|Merienda" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="menu-container">
        <div class="menu">
          <div class="left_menu">
          <div>
            <a href="index.html" class="links brand_name">Kodeland</a>
          </div>
          <div class="add_post">
            <a href="addPost.html" class="links">Add Posts</a>
          </div>
          <div class="featured_post">
            <a href="featuredPost.html" class="links">Featured Posts</a>
          </div>
          <div class="profile">
            <a href="profile.html" class="links">Profile</a>
          </div>
          </div>
          <div class="center_menu">
                <form action="" method="POST">
                  <div class="search_input_button">
                        <div class="">
                          <input type="text" placeholder="Search..." class="search_box">
                        </div>
                        <div class="search_button">
                          <button>Search Posts</button>
                        </div>
                      </div>
                </form>
              </div>
          <div class="right_menu">
                <div>
                    <a href="#" class="logout">LOG OUT</a>
                  </div>
            </div>
        </div>
      </div>
      <div class="main">
        <div class="row">
         <div class="col-10">
          <p>Consider the following dummy example:</p>
      <br>
          <pre>
              def common_divisors_generator(n, m):

              # Init code
              factors_n = [i for i in range(1, n + 1) if n%i == 0]
              factors_m = [i for i in range(1, m + 1) if m%i == 0]
          
              # Iterative code
              for fn in factors_n:
                  for fm in factors_m:
                      if fn == fm:
                          yield fn
          
          # The next line is fast because no code is executed yet
          cdg = common_divisors_generator(1537745, 373625435)
          # Next line is slow because init code is executed on first iteration call
          for g in cdg:
              print(g)
          </pre>
<br>
<p>The init code, which takes a long time to compute, is executed once the generator has been iterated for 
  the first time (as opposed to when the generator it is initialized). 
  I would prefer that the init code it is executed as the generator is initialized.

  For this purpose I convert the generator into an iterator class as follows:</p>
  <br>
<pre>class CommonDivisorsIterator(object):

def __init__(self, n, m):
# Init code
self.factors_n = [i for i in range(1, n + 1) if n%i == 0]
self.factors_m = [i for i in range(1, m + 1) if m%i == 0]

def __iter__(self):
return self

def __next__(self):
# Some Pythonic implementation of the iterative code above
# ...
return next_common_divisor</pre>
<br>
<br>
<h3>Answers</h3>
<hr>
<br>
<p>In both cases (whether you use a function or a class), the solution is to split the 
  implementation into two functions: a setup function and a generator function.
<br>
Using yield in a function turns it into a generator function, which means that it returns a 
generator when it's called. But even without using yield,
 nothing's preventing you from creating a generator and returning it, like so:</p>
<br>
<pre>
    def common_divisors_generator(n, m):
    factors_n = [i for i in range(1, n + 1) if n%i == 0]
    factors_m = [i for i in range(1, m + 1) if m%i == 0]

    def gen():
        for fn in factors_n:
            for fm in factors_m:
                if fn == fm:
                    yield fn

    return gen()
</pre>
<br>
<p>And if you're using a class, there's no need to implement a __next__ method. You can just use yield in the __iter__ method:</p>
<br>

<pre>
    class CommonDivisorsIterator(object):
    def __init__(self, n, m):
        self.factors_n = [i for i in range(1, n + 1) if n%i == 0]
        self.factors_m = [i for i in range(1, m + 1) if m%i == 0]

    def __iter__(self):
        for fn in self.factors_n:
            for fm in self.factors_m:
                if fn == fm:
                    yield fn
</pre>
            <br>
            <br>
            
            <h3>Your Answer</h3>
<form action="">
  <textarea name="" id="textarea" cols="40" rows="10"></textarea>
  <div class="form-group"><button class="btn-primary" type="submit">POST ANSWER</button></div>
</form>
          </div>
        </div>
        
        </div>
    </div>
</body>
</html>